# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google Sign In –¥–ª—è Flutter + Firebase

## ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–¥!

–¢–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **google_sign_in** –ø–∞–∫–µ—Ç –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (Android/iOS), —â–æ –¥–æ–∑–≤–æ–ª—è—î –≤—Ö–æ–¥–∏—Ç–∏ **–±–µ–∑ –ø–µ—Ä–µ–∫–∏–¥–∞–Ω–Ω—è –≤ –±—Ä–∞—É–∑–µ—Ä**!

## üîß –ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤—ñ –∫—Ä–æ–∫–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ Google Sign In –Ω–∞ Android:

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Firebase Console

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç `tracker_costs`
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Authentication** ‚Üí **Sign-in method**
4. –ó–Ω–∞–π–¥—ñ—Ç—å **Google** —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏**

### 2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ OAuth Consent Screen

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –í –º–µ–Ω—é –∑–ª—ñ–≤–∞ –∑–Ω–∞–π–¥—ñ—Ç—å **APIs & Services** ‚Üí **OAuth consent screen**

#### –í–∞–∂–ª–∏–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

**User Type:**
- –û–±–µ—Ä—ñ—Ç—å **External** (—è–∫—â–æ –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
- –ê–±–æ **Internal** (—è–∫—â–æ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó)

**Scopes:**
–î–æ–¥–∞–π—Ç–µ —Ç—ñ–ª—å–∫–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ:
- `userinfo.email`
- `userinfo.profile`

**Test users (—è–∫—â–æ User Type = External —ñ —Å—Ç–∞—Ç—É—Å Testing):**
- –î–æ–¥–∞–π—Ç–µ —Å–≤–æ—ó test email –∞–¥—Ä–µ—Å–∏
- –ü–æ–∫–∏ –¥–æ–¥–∞—Ç–æ–∫ –≤ —Ä–µ–∂–∏–º—ñ Testing, —Ç—ñ–ª—å–∫–∏ —Ü—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–º–æ–∂—É—Ç—å —É–≤—ñ–π—Ç–∏

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Authorized domains

1. –í **OAuth consent screen** ‚Üí **Authorized domains**
2. –î–æ–¥–∞–π—Ç–µ:
   - `localhost` (–¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)
   - –í–∞—à –¥–æ–º–µ–Ω (–¥–ª—è production)

### 4. Authorized redirect URIs

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **APIs & Services** ‚Üí **Credentials**
2. –ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à OAuth 2.0 Client ID
3. –í **Authorized redirect URIs** –¥–æ–¥–∞–π—Ç–µ:

```
http://localhost
http://localhost:*
https://your-app-id.firebaseapp.com/__/auth/handler
```

### 5. –ö–æ–¥ –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–í `auth_repository.dart` –≤–∂–µ —î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

```dart
googleProvider.setCustomParameters({
  'prompt': 'select_account', // –ü–æ–∫–∞–∑–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∞–∫–∞—É–Ω—Ç—ñ–≤
  'login_hint': '', // –ë–µ–∑ –ø—ñ–¥–∫–∞–∑–∫–∏ - –¥–æ–∑–≤–æ–ª—è—î –≤–∏–±—Ä–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π
  'access_type': 'online', // –ù–µ –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ offline –¥–æ—Å—Ç—É–ø
});
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –ü–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è –µ–∫—Ä–∞–Ω –≤–∏–±–æ—Ä—É Google –∞–∫–∞—É–Ω—Ç–∞
4. –û–±–µ—Ä—ñ—Ç—å —ñ—Å–Ω—É—é—á–∏–π –∞–∫–∞—É–Ω—Ç
5. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –¥–æ—Å—Ç—É–ø –¥–æ email —Ç–∞ –ø—Ä–æ—Ñ—ñ–ª—é

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### –ü–æ–º–∏–ª–∫–∞: "Access blocked: This app's request is invalid"
**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–π—Ç–µ authorized redirect URI –≤ Google Cloud Console

### –ü–æ–º–∏–ª–∫–∞: "This app isn't verified"
**–†—ñ—à–µ–Ω–Ω—è:** 
- –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏: –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Advanced" ‚Üí "Go to [App] (unsafe)"
- –î–ª—è production: –ü—Ä–æ–π–¥—ñ—Ç—å –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é –≤ Google

### –ü–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –Ω–æ–≤–æ–≥–æ –∞–∫–∞—É–Ω—Ç–∞
**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ `prompt: 'select_account'` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
- –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
- –°–ø—Ä–æ–±—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º—ñ —ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

- [Firebase Authentication Documentation](https://firebase.google.com/docs/auth)
- [Google OAuth 2.0 Documentation](https://developers.google.com/identity/protocols/oauth2)
